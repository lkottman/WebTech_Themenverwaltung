import {EmptyError} from 'rxjs/_esm2015/internal/util/EmptyError';
import {filter} from 'rxjs/_esm2015/internal/operators/filter';
import {takeLast} from 'rxjs/_esm2015/internal/operators/takeLast';
import {throwIfEmpty} from 'rxjs/_esm2015/internal/operators/throwIfEmpty';
import {defaultIfEmpty} from 'rxjs/_esm2015/internal/operators/defaultIfEmpty';
import {identity} from 'rxjs/_esm2015/internal/util/identity';

export function last(predicate, defaultValue) {
    const hasDefaultValue = arguments.length >= 2;
    return (source) => source.pipe(predicate ? filter((v, i) => predicate(v, i, source)) : identity, takeLast(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(() => new EmptyError()));
}

//# sourceMappingURL=last.js.map